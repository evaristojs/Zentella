@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply scroll-smooth;
    overflow-x: hidden;
  }
  
  html.dark {
    color-scheme: dark;
  }
  
  /* Enhanced tooltips for better visibility */
  [title]:hover::after {
    content: attr(title);
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 500;
    white-space: nowrap;
    z-index: 1000;
    pointer-events: none;
    opacity: 0;
    animation: tooltipFadeIn 0.2s ease-in-out forwards;
  }
  
  html.dark [title]:hover::after {
    background: rgba(255, 255, 255, 0.95);
    color: #1a1a1a;
  }
  
  [title]:hover::before {
    content: '';
    position: absolute;
    bottom: 110%;
    left: 50%;
    transform: translateX(-50%);
    border: 5px solid transparent;
    border-top-color: rgba(0, 0, 0, 0.9);
    z-index: 1000;
    pointer-events: none;
    opacity: 0;
    animation: tooltipFadeIn 0.2s ease-in-out forwards;
  }
  
  html.dark [title]:hover::before {
    border-top-color: rgba(255, 255, 255, 0.95);
  }
  
  @keyframes tooltipFadeIn {
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }
  
  /* Section snap points */
  section {
    scroll-snap-align: start;
    scroll-snap-stop: always;
  }
}

body {
  @apply font-sans bg-bg-base-light dark:bg-bg-base-dark text-text-primary-light dark:text-text-primary-dark transition-all duration-300;
  overflow-x: hidden;
  width: 100%;
  max-width: 100vw;
  scroll-snap-type: y mandatory;
  height: 100vh;
  overflow-y: auto;
  /* Ocultar scrollbar */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
}

/* Ocultar scrollbar para Webkit (Chrome, Safari, Edge) */
body::-webkit-scrollbar {
  display: none;
}

/* Mobile menu - Force left alignment */
#mobile-navigation-menu {
  /* Force position from top-left corner */
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  min-height: 100vh !important;
  min-height: 100dvh !important; /* Dynamic viewport height for mobile */
  max-width: 100vw !important;
  z-index: 60 !important;
  
  /* Reset any conflicting properties that could cause displacement */
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
  outline: none !important;
  box-sizing: border-box !important;
  overflow: hidden !important;
  transform: none !important;
  right: auto !important;
  bottom: auto !important;
}

/* Mobile optimization for all screen sizes */
@media screen and (max-width: 480px) {
  #mobile-navigation-menu {
    /* Ensure content never overflows on small screens */
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    /* Force left alignment on small screens */
    left: 0 !important;
    transform: translateX(0) !important;
  }
}

/* Reset any potential container offsets */
#mobile-navigation-menu * {
  box-sizing: border-box !important;
}

* {
  box-sizing: border-box;
}

/* Minimum font size for mobile accessibility */
@media (max-width: 640px) {
  body {
    font-size: 14px;
  }
}

@layer components {
  /* Custom Message Box Styles - Adaptado para Zentella */
  .messageBox {
    @apply w-full h-12 flex items-center justify-center px-4 rounded-xl border transition-all duration-300;
    @apply bg-white dark:bg-bg-secondary-dark border-text-secondary-light/30 dark:border-text-secondary-dark/30;
  }
  
  .messageBox:focus-within {
    @apply border-color-primary dark:border-color-primary ring-2 ring-color-primary/20;
  }
  
  .messageBox input,
  .messageBox select,
  .messageBox textarea {
    @apply w-full h-full bg-transparent outline-none border-none text-text-primary-light dark:text-text-primary-dark;
    @apply placeholder-text-secondary-light dark:placeholder-text-secondary-dark;
  }
  
  .messageBox textarea {
    @apply h-32 py-3 resize-none;
  }
  
  .messageBox select {
    @apply cursor-pointer;
  }
  
  /* Custom styling for select dropdowns */
  .messageBox select option {
    @apply bg-white dark:bg-bg-secondary-dark text-text-primary-light dark:text-text-primary-dark;
  }

  /* üì± OnePlus 10 Pro Viewport Constraints (412px) */
  .layout-container {
    @apply max-w-full mx-auto px-3 sm:px-6 lg:px-8;
  }
  
  .mobile-safe {
    @apply max-w-[380px] sm:max-w-full mx-auto;
  }
  
  .mobile-text {
    @apply text-sm sm:text-base md:text-lg;
  }
  
  .mobile-heading {
    @apply text-lg sm:text-xl md:text-2xl lg:text-3xl;
  }

  /* üî† Tipograf√≠a predefinida */
  .heading-1 {
    @apply text-2xl md:text-3xl font-bold tracking-tight;
  }
  
  .heading-2 {
    @apply text-xl md:text-2xl font-semibold;
  }
  
  .heading-3 {
    @apply text-lg md:text-xl font-medium;
  }
  
  .text-base {
    @apply text-text-secondary-light dark:text-text-secondary-dark;
  }
  
  .text-small {
    @apply text-sm text-text-secondary-light dark:text-text-secondary-dark;
  }

  /* üñºÔ∏è Botones predefinidos con microinteracciones */
  .btn-primary {
    @apply bg-color-primary text-white shadow-md hover:bg-color-primary-hover hover:shadow-lg hover:scale-105 rounded-xl px-6 py-3 w-full sm:w-auto transition-all duration-200 ease-in-out min-h-[44px] min-w-[44px] focus:ring-2 focus:ring-color-primary focus:outline-none active:scale-95;
  }
  
  .btn-secondary {
    @apply bg-bg-secondary-light dark:bg-bg-secondary-dark text-text-primary-light dark:text-text-primary-dark rounded-xl px-4 py-2 w-full sm:w-auto hover:bg-color-primary/10 dark:hover:bg-color-primary/20 hover:shadow-md hover:scale-105 transition-all duration-200 ease-in-out min-h-[44px] min-w-[44px] focus:ring-2 focus:ring-color-primary focus:outline-none active:scale-95;
  }
  
  .btn-ghost {
    @apply bg-transparent border border-color-primary/20 dark:border-color-primary/30 text-color-primary rounded-xl px-4 py-2 hover:bg-color-primary/10 dark:hover:bg-color-primary/20 hover:shadow-sm hover:scale-105 transition-all duration-200 ease-in-out min-h-[44px] min-w-[44px] focus:ring-2 focus:ring-color-primary focus:outline-none active:scale-95;
  }
  
  .btn-disabled {
    @apply opacity-50 cursor-not-allowed transform-none;
  }

  /* üìè Inputs y formularios predefinidos con microinteracciones */
  .input-base {
    @apply border border-color-primary/20 dark:border-color-primary/30 rounded-lg px-4 py-2 w-full focus:ring-2 focus:ring-color-primary focus:border-color-primary outline-none bg-bg-secondary-light dark:bg-bg-secondary-dark text-text-primary-light dark:text-text-primary-dark transition-all duration-200 ease-in-out min-h-[44px] hover:border-color-primary/50;
  }
  
  .label-base {
    @apply text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-1;
  }
  
  .placeholder-base {
    @apply text-text-secondary-light/60 dark:text-text-secondary-dark/60;
  }

  /* üì¶ Tarjetas & Layouts predefinidos con microinteracciones */
  .card-base {
    @apply bg-bg-secondary-light dark:bg-bg-secondary-dark rounded-2xl shadow-md p-4 md:p-6 hover:shadow-lg hover:-translate-y-1 transition-all duration-200 ease-in-out border border-color-primary/5 dark:border-color-primary/10 relative z-0 hover:z-30;
  }
  
  .card-base-static {
    @apply bg-bg-secondary-light dark:bg-bg-secondary-dark rounded-2xl shadow-md p-4 md:p-6 border border-color-primary/5 dark:border-color-primary/10;
  }

  .card-base-safe {
    @apply bg-bg-secondary-light dark:bg-bg-secondary-dark rounded-2xl shadow-md p-4 md:p-6 hover:shadow-lg hover:scale-105 transition-all duration-200 ease-in-out border border-color-primary/5 dark:border-color-primary/10 relative z-0;
  }
  
  .layout-container {
    @apply max-w-7xl mx-auto p-mobile sm:p-tablet md:p-desktop;
  }

  /* üóÇÔ∏è Grid System predefinido */
  .grid-mobile {
    @apply grid grid-cols-1 gap-4;
  }
  
  .grid-tablet {
    @apply grid grid-cols-2 gap-6;
  }
  
  .grid-desktop-3 {
    @apply grid grid-cols-3 gap-8;
  }
  
  .grid-desktop-4 {
    @apply grid grid-cols-4 gap-8;
  }

  @media (max-width: 480px) {
    .portfolio-modal {
      padding-top: 56px;
      padding-bottom: 56px;
    }
  }

  @media (min-width: 641px) and (max-width: 1024px) {
    .portfolio-modal {
      padding-top: 64px;
      padding-bottom: 64px;
    }
  }

  @media (min-width: 1025px) {
    .portfolio-modal {
      padding-top: 80px;
      padding-bottom: 80px;
    }
  }
}

@layer utilities {
  /* üöÄ ChatBase.co style backdrop blur implementation */
  .backdrop-blur-\[100px\], .backdrop-blur-md {
    -webkit-backdrop-filter: var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);
    backdrop-filter: var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);
  }

  /* ‚ú® Interacciones predefinidas */
  .hover-smooth {
    @apply transition-all duration-200 ease-in-out;
  }
  
  .focus-ring {
    @apply ring-2 ring-color-primary focus:outline-none;
  }
  
  .active-scale {
    @apply active:scale-95;
  }
  
  .loading-spin {
    @apply animate-spin;
  }
  
  .shake {
    animation: shake 0.5s ease-in-out;
  }
  
  .glow {
    @apply shadow-lg shadow-color-primary/25;
  }
  
  .bounce-in {
    animation: bounceIn 0.6s ease-out;
  }
  
  .fade-in-up {
    animation: fadeInUp 0.6s ease-out;
  }
  
  .slide-down {
    animation: slideDown 0.25s ease-out;
  }
  
  .slide-up {
    animation: slideUp 0.25s ease-out;
  }
}

/* Keyframes para animaciones de microinteracciones */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
}

@keyframes bounceIn {
  0% { opacity: 0; transform: scale(0.9); }
  50% { opacity: 1; transform: scale(1.05); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes fadeInUp {
  0% { opacity: 0; transform: translateY(20px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes slideDown {
  0% { opacity: 0; transform: translateY(-10px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes slideUp {
  0% { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(-10px); }
}